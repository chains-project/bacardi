17,20c17,18
< import org.spongepowered.api.network.ChannelBinding.RawDataChannel;
< import org.spongepowered.api.network.ChannelBuf;
< import org.spongepowered.api.network.ChannelRegistrar;
< import org.spongepowered.api.network.RawDataListener;
---
> import org.spongepowered.api.network.ChannelBinding;
> import org.spongepowered.api.network.MessageChannel;
21a20
> import org.spongepowered.api.network.listener.RawDataListener;
29c28
<     private final RawDataChannel permissionsResultChannel;
---
>     private final MessageChannel permissionsResultChannel;
32c31
<     CheckPermissionListener(ChangeSkinSponge plugin, ChannelRegistrar channelRegistrar) {
---
>     CheckPermissionListener(ChangeSkinSponge plugin, ChannelBinding.RawDataChannel channelRegistrar) {
40c39
<     public void handlePayload(ChannelBuf data, RemoteConnection connection, Type side) {
---
>     public void handlePayload(ByteArrayDataInput data, RemoteConnection connection, Type side) {
42d40
<         ByteArrayDataInput dataInput = ByteStreams.newDataInput(data.array());
44c42
<         checkMessage.readFrom(dataInput);
---
>         checkMessage.readFrom(data);
46,49c44
<         CheckPermMessage message = new CheckPermMessage();
<         message.readFrom(dataInput);
< 
<         checkPermissions((Player) connection, message);
---
>         checkPermissions((Player) connection, checkMessage);
