28c28
< import org.apache.commons.io.output.ThresholdingOutputStream;
---
> import org.apache.commons.io.output.DeferredFileOutputStream; // Updated import
33c33
< class OffloadingOutputStream extends ThresholdingOutputStream
---
> class OffloadingOutputStream extends DeferredFileOutputStream // Updated class
110c110
<         super( threshold );
---
>         super( threshold, outputFile, prefix, suffix, directory ); // Updated constructor call
120c120
<     // --------------------------------------- ThresholdingOutputStream methods
---
>     // --------------------------------------- DeferredFileOutputStream methods
155c155
<         InputStream memoryAsInput = memoryOutputStream.toInputStream();
---
>         InputStream memoryAsInput = new ByteArrayInputStream(memoryOutputStream.toByteArray()); // Updated to use ByteArrayInputStream
