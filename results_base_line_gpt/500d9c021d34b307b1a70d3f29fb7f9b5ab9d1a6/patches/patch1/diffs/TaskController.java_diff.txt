14,15d13
< import javax.mvc.View;
< import javax.mvc.binding.BindingResult;
17d14
< import javax.mvc.security.CsrfProtected;
44,46d40
<     private BindingResult validationResult;
< 
<     @Inject
53,79d46
<     @View("tasks.xhtml")
<     public void allTasks() {
<         log.log(Level.INFO, "fetching all tasks");
< 
<         List<Task> todotasks = taskRepository.findByStatus(Task.Status.TODO);
<         List<Task> doingtasks = taskRepository.findByStatus(Task.Status.DOING);
<         List<Task> donetasks = taskRepository.findByStatus(Task.Status.DONE);
< 
<         log.log(Level.INFO, "got all tasks: todotasks@{0}, doingtasks@{1}, donetasks@{2}", new Object[]{todotasks.size(), doingtasks.size(), donetasks.size()});
< 
<         models.put("todotasks", todotasks);
<         models.put("doingtasks", doingtasks);
<         models.put("donetasks", donetasks);
< 
<     }
< 
<     @GET
<     @Path("{id}")
<     public Viewable taskDetails(@PathParam("id") @NotNull Long id) {
<         log.log(Level.INFO, "get task by id@{0}", id);
<         Task task = taskRepository.findById(id);
< 
<         models.put("details", task);
<         return new Viewable("details.xhtml");
<     }
< 
<     @GET
89,90d55
<     @CsrfProtected
<     //@ValidateOnExecution(type = ExecutableType.NONE)
94,100c59,60
<         if (validationResult.isFailed()) {
<             AlertMessage alert = AlertMessage.danger("Validation voilations!");
<             validationResult.getAllErrors()
<                     .stream()
<                     .forEach((ParamError t) -> {
<                         alert.addError(t.getParamName(), "", t.getMessage());
<                     });
---
>         if (form.getName() == null || form.getDescription() == null) {
>             AlertMessage alert = AlertMessage.danger("Validation violations!");
117a78,87
>     @Path("{id}")
>     public Viewable taskDetails(@PathParam("id") @NotNull Long id) {
>         log.log(Level.INFO, "get task by id@{0}", id);
>         Task task = taskRepository.findById(id);
> 
>         models.put("details", task);
>         return new Viewable("details.xhtml");
>     }
> 
>     @GET
134d103
<     @CsrfProtected
138,144c107,108
<         if (validationResult.isFailed()) {
<             AlertMessage alert = AlertMessage.danger("Validation voilations!");
<             validationResult.getAllErrors()
<                     .stream()
<                     .forEach((ParamError t) -> {
<                         alert.addError(t.getParamName(), "", t.getMessage());
<                     });
---
>         if (form.getName() == null || form.getDescription() == null) {
>             AlertMessage alert = AlertMessage.danger("Validation violations!");
164d127
<     //@CsrfProtected
