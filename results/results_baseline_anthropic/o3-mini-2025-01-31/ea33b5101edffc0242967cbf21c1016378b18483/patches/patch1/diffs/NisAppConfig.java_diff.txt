5,6c5,6
< import org.nem.core.model.*;
< import org.nem.core.model.primitive.*;
---
> import org.nem.core.model.BlockChain;
> import org.nem.core.model.primitive.Amount;
9,10c9,21
< import org.nem.deploy.*;
< import org.nem.nis.*;
---
> import org.nem.deploy.CommonStarter;
> import org.nem.deploy.NemConfigurationPolicy;
> import org.nem.nis.AccountDao;
> import org.nem.nis.BlockAnalyzer;
> import org.nem.nis.BlockChainContextFactory;
> import org.nem.nis.BlockChainLastBlockLayer;
> import org.nem.nis.BlockChainServices;
> import org.nem.nis.BlockChainUpdater;
> import org.nem.nis.BlockDao;
> import org.nem.nis.NisCacheUtils;
> import org.nem.nis.NisConfiguration;
> import org.nem.nis.UnconfirmedTransactions;
> import org.nem.nis.UnconfirmedTransactionsFilter;
12,14c23,33
< import org.nem.nis.boot.*;
< import org.nem.nis.cache.*;
< import org.nem.nis.connect.*;
---
> import org.nem.nis.boot.HarvestAwareNetworkHostBootstrapper;
> import org.nem.nis.boot.NisMain;
> import org.nem.nis.cache.DefaultAccountCache;
> import org.nem.nis.cache.DefaultAccountStateCache;
> import org.nem.nis.cache.DefaultHashCache;
> import org.nem.nis.cache.DefaultMosaicIdCache;
> import org.nem.nis.cache.SynchronizedAccountCache;
> import org.nem.nis.cache.SynchronizedAccountStateCache;
> import org.nem.nis.cache.SynchronizedHashCache;
> import org.nem.nis.cache.SynchronizedMosaicIdCache;
> import org.nem.nis.connect.HttpConnectorPool;
16,18c35,44
< import org.nem.nis.dao.*;
< import org.nem.nis.harvesting.*;
< import org.nem.nis.mappers.*;
---
> import org.nem.nis.dao.TransferDao;
> import org.nem.nis.harvesting.BlockGenerator;
> import org.nem.nis.harvesting.BlockScorer;
> import org.nem.nis.harvesting.Harvester;
> import org.nem.nis.harvesting.HarvestingTask;
> import org.nem.nis.mappers.DefaultMapperFactory;
> import org.nem.nis.mappers.MapperFactory;
> import org.nem.nis.mappers.NisDbModelToModelMapper;
> import org.nem.nis.mappers.NisMapperFactory;
> import org.nem.nis.mappers.NisModelToDbModelMapper;
20c46,47
< import org.nem.nis.pox.poi.*;
---
> import org.nem.nis.pox.poi.PoiImportanceCalculator;
> import org.nem.nis.pox.poi.PoiOptionsBuilder;
22c49
< import org.nem.nis.secret.*;
---
> import org.nem.nis.secret.UnlockedAccounts;
24,26c51,63
< import org.nem.nis.state.*;
< import org.nem.nis.sync.*;
< import org.nem.nis.validators.*;
---
> import org.nem.nis.state.DefaultNisCache;
> import org.nem.nis.state.NisCacheUtils;
> import org.nem.nis.state.ReadOnlyNisCache;
> import org.nem.nis.sync.BlockTransactionObserverFactory;
> import org.nem.nis.sync.CountingBlockSynchronizer;
> import org.nem.nis.sync.PeerNetworkScheduler;
> import org.nem.nis.sync.UnconfirmedStateFactory;
> import org.nem.nis.sync.controller.UnconfirmedTransactionsFilter;
> import org.nem.nis.sync.DefaultUnconfirmedTransactions;
> import org.nem.nis.sync.SynchronizedUnconfirmedTransactions;
> import org.nem.nis.validators.BlockValidatorFactory;
> import org.nem.nis.validators.SingleTransactionValidator;
> import org.nem.nis.validators.TransactionValidatorFactory;
28c65
< import org.nem.peer.node.*;
---
> import org.nem.peer.node.NisPeerNetworkHost;
30,31c67,72
< import org.nem.peer.trust.*;
< import org.nem.specific.deploy.*;
---
> import org.nem.peer.trust.CachedTrustProvider;
> import org.nem.peer.trust.EigenTrustPlusPlus;
> import org.nem.peer.trust.LowComTrustProvider;
> import org.nem.peer.trust.TrustProvider;
> import org.nem.specific.deploy.NisConfigurationPolicy;
> import org.nem.specific.deploy.NisMain;
40,41c81,87
< import java.util.*;
< import java.util.function.*;
---
> import java.util.Collection;
> import java.util.EnumSet;
> import java.util.HashMap;
> import java.util.Map;
> import java.util.Properties;
> import java.util.function.Function;
> import java.util.function.Supplier;
108,113c154,160
<                 final org.flywaydb.core.Flyway flyway = new Flyway();
<                 flyway.setDataSource(this.dataSource());
<                 flyway.setClassLoader(NisAppConfig.class.getClassLoader());
<                 flyway.setLocations(prop.getProperty("flyway.locations"));
<                 flyway.setValidateOnMigrate(Boolean.valueOf(prop.getProperty("flyway.validate")));
<                 return flyway;
---
>                 // Use the new Flyway API via the builder pattern.
>                 return Flyway.configure()
>                                 .dataSource(this.dataSource())
>                                 .classLoader(NisAppConfig.class.getClassLoader())
>                                 .locations(prop.getProperty("flyway.locations"))
>                                 .validateOnMigrate(Boolean.parseBoolean(prop.getProperty("flyway.validate")))
>                                 .load();
