19d18
< import com.google.api.services.cloudresourcemanager.model.Binding;
22d20
< import com.google.cloud.Policy.Marshaller;
37c35
<     extends Marshaller<com.google.api.services.cloudresourcemanager.model.Policy> {
---
>     extends Policy.Marshaller {
55c53
<   protected Policy fromPb(com.google.api.services.cloudresourcemanager.model.Policy policyPb) {
---
>   protected Policy fromPb(com.google.api.core.BetaApi comPolicyPb) {
57,58c55,56
<     if (policyPb.getBindings() != null) {
<       for (Binding bindingPb : policyPb.getBindings()) {
---
>     if (comPolicyPb.getBindings() != null) {
>       for (com.google.iam.v1.Binding bindingPb : comPolicyPb.getBindings()) {
72c70
<     return new Builder(bindings, policyPb.getEtag(), policyPb.getVersion()).build();
---
>     return new Builder(bindings, comPolicyPb.getEtag(), comPolicyPb.getVersion()).build();
76,79c74,77
<   protected com.google.api.services.cloudresourcemanager.model.Policy toPb(Policy policy) {
<     com.google.api.services.cloudresourcemanager.model.Policy policyPb =
<         new com.google.api.services.cloudresourcemanager.model.Policy();
<     List<Binding> bindingPbList = new LinkedList<>();
---
>   protected com.google.api.core.BetaApi toPb(Policy policy) {
>     com.google.api.core.BetaApi policyPb =
>         com.google.api.core.BetaApi.newBuilder().setEtag(policy.getEtag()).setVersion(policy.getVersion()).build();
>     List<com.google.iam.v1.Binding> bindingPbList = new LinkedList<>();
81,84c79,80
<       Binding bindingPb = new Binding();
<       bindingPb.setRole(binding.getKey().getValue());
<       bindingPb.setMembers(
<           Lists.transform(
---
>       com.google.iam.v1.Binding bindingPb = com.google.iam.v1.Binding.newBuilder().setRole(binding.getKey().getValue()).build();
>       List<String> members = Lists.transform(
91c87
<               }));
---
>               });
94,96d89
<     policyPb.setBindings(bindingPbList);
<     policyPb.setEtag(policy.getEtag());
<     policyPb.setVersion(policy.getVersion());
